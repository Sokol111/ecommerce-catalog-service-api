openapi: 3.0.3
info:
    title: Catalog API
    version: 1.0.4
    description: |
        API for managing product catalog.

        This service combines:
        - **Attributes** - Product attribute definitions (color, size, RAM, etc.)
        - **Categories** - Product categories with attribute assignments
        - **Products** - Products with attribute values
tags:
    - name: Attributes
      description: Product attribute definitions and options
    - name: Categories
      description: Product categories with attribute assignments
    - name: Products
      description: Products with attribute values
paths:
    /v1/category/create:
        post:
            summary: Create a new category
            operationId: createCategory
            tags:
                - Categories
            security:
                - BearerAuth:
                    - categories:write
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - name
                                - enabled
                            properties:
                                id:
                                    type: string
                                    format: uuid
                                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                    description: Optional client-generated UUID
                                name:
                                    type: string
                                    example: "Smartphones"
                                    minLength: 2
                                    maxLength: 100
                                enabled:
                                    type: boolean
                                    example: true
                                attributes:
                                    type: array
                                    description: List of attributes to assign to this category
                                    items:
                                        type: object
                                        description: Input for assigning an attribute to a category
                                        required:
                                            - attributeId
                                            - role
                                            - filterable
                                            - searchable
                                        properties:
                                            attributeId:
                                                type: string
                                                format: uuid
                                                pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                                example: "123e4567-e89b-12d3-a456-426614174000"
                                            role:
                                                type: string
                                                enum:
                                                    - variant
                                                    - specification
                                                example: "specification"
                                                description: |
                                                    How this attribute is used in this category:
                                                    - variant: Creates product variants (color, size) - buyer can choose
                                                    - specification: Describes the product (processor, screen) - shown in specs
                                            required:
                                                type: boolean
                                                example: false
                                                description: Whether products must have this attribute
                                            sortOrder:
                                                type: integer
                                                example: 1
                                                minimum: 0
                                                maximum: 10000
                                            filterable:
                                                type: boolean
                                                example: true
                                                description: Whether this attribute can be used as a filter
                                            searchable:
                                                type: boolean
                                                example: false
                                                description: Whether this attribute value is included in search
            responses:
                "200":
                    description: Category created successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - id
                                    - version
                                    - name
                                    - enabled
                                    - createdAt
                                    - modifiedAt
                                properties:
                                    id:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    version:
                                        type: integer
                                        example: 1
                                    name:
                                        type: string
                                        example: "Smartphones"
                                    enabled:
                                        type: boolean
                                        example: true
                                    createdAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-01T00:00:00Z"
                                    modifiedAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-02T00:00:00Z"
                                    attributes:
                                        type: array
                                        description: List of attributes assigned to this category
                                        items:
                                            type: object
                                            description: Embedded category attribute
                                            required:
                                                - attributeId
                                                - role
                                                - required
                                                - sortOrder
                                                - filterable
                                                - searchable
                                            properties:
                                                attributeId:
                                                    type: string
                                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                                role:
                                                    type: string
                                                    enum:
                                                        - variant
                                                        - specification
                                                    example: "specification"
                                                required:
                                                    type: boolean
                                                    example: false
                                                sortOrder:
                                                    type: integer
                                                    example: 1
                                                filterable:
                                                    type: boolean
                                                    example: true
                                                searchable:
                                                    type: boolean
                                                    example: false
                "400":
                    description: Validation error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/product/create:
        post:
            summary: Create a new product
            operationId: createProduct
            tags:
                - Products
            security:
                - BearerAuth:
                    - products:write
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - name
                                - enabled
                                - price
                                - quantity
                            properties:
                                id:
                                    type: string
                                    format: uuid
                                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                    description: Optional client-generated UUID
                                name:
                                    type: string
                                    example: "iPhone 15 Pro"
                                    minLength: 2
                                    maxLength: 100
                                description:
                                    type: string
                                    example: "Latest iPhone with A17 Pro chip"
                                    maxLength: 2000
                                price:
                                    type: number
                                    example: 999.99
                                    minimum: 0
                                    maximum: 100000000
                                quantity:
                                    type: integer
                                    example: 100
                                    minimum: 0
                                    maximum: 100000000
                                imageId:
                                    type: string
                                    format: uuid
                                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                    description: Reference to image in Image Service
                                categoryId:
                                    type: string
                                    format: uuid
                                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                    description: Category this product belongs to
                                enabled:
                                    type: boolean
                                    example: true
                                attributes:
                                    type: array
                                    description: List of attribute values for this product
                                    items:
                                        type: object
                                        description: Input for assigning an attribute value to a product
                                        required:
                                            - attributeId
                                        properties:
                                            attributeId:
                                                type: string
                                                format: uuid
                                                pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                                example: "123e4567-e89b-12d3-a456-426614174000"
                                                description: Reference to the attribute definition
                                            optionSlugValue:
                                                type: string
                                                example: "red"
                                                maxLength: 50
                                                description: Slug of the selected option (for single type)
                                            optionSlugValues:
                                                type: array
                                                description: Slugs of selected options (for multiple type)
                                                items:
                                                    type: string
                                                    maxLength: 50
                                                example: ["wifi", "bluetooth", "nfc"]
                                            numericValue:
                                                type: number
                                                example: 128
                                                description: Numeric value (for range type - e.g., RAM, storage)
                                            textValue:
                                                type: string
                                                example: "Custom engraving text"
                                                maxLength: 2000
                                                description: Free text value (for text type)
                                            booleanValue:
                                                type: boolean
                                                example: true
                                                description: Boolean value (for boolean type)
            responses:
                "200":
                    description: Product created successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - id
                                    - version
                                    - name
                                    - price
                                    - quantity
                                    - enabled
                                    - createdAt
                                    - modifiedAt
                                properties:
                                    id:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    version:
                                        type: integer
                                        example: 1
                                    name:
                                        type: string
                                        example: "iPhone 15 Pro"
                                    description:
                                        type: string
                                        example: "Latest iPhone with A17 Pro chip"
                                    price:
                                        type: number
                                        example: 999.99
                                    quantity:
                                        type: integer
                                        example: 100
                                    imageId:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    categoryId:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    enabled:
                                        type: boolean
                                        example: true
                                    createdAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-01T00:00:00Z"
                                    modifiedAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-02T00:00:00Z"
                                    attributes:
                                        type: array
                                        description: List of attribute values for this product
                                        items:
                                            type: object
                                            description: Embedded product attribute with value
                                            required:
                                                - attributeId
                                            properties:
                                                attributeId:
                                                    type: string
                                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                                    description: Reference to the attribute definition
                                                optionSlugValue:
                                                    type: string
                                                    example: "red"
                                                    description: Slug of the selected option (for single type)
                                                optionSlugValues:
                                                    type: array
                                                    description: Slugs of selected options (for multiple type)
                                                    items:
                                                        type: string
                                                    example: ["wifi", "bluetooth", "nfc"]
                                                numericValue:
                                                    type: number
                                                    example: 128
                                                    description: Numeric value (for range type)
                                                textValue:
                                                    type: string
                                                    example: "Custom engraving text"
                                                    description: Free text value (for text type)
                                                booleanValue:
                                                    type: boolean
                                                    example: true
                                                    description: Boolean value (for boolean type)
                "400":
                    description: Validation error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "401":
                    description: Unauthorized
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "403":
                    description: Forbidden - insufficient permissions
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/attribute/create:
        post:
            summary: Create a new attribute
            operationId: createAttribute
            tags:
                - Attributes
            security:
                - BearerAuth:
                    - attributes:write
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - name
                                - slug
                                - type
                                - enabled
                            properties:
                                id:
                                    type: string
                                    format: uuid
                                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                    description: Optional client-generated UUID
                                name:
                                    type: string
                                    example: "Color"
                                    minLength: 2
                                    maxLength: 100
                                slug:
                                    type: string
                                    example: "color"
                                    minLength: 2
                                    maxLength: 50
                                    pattern: "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                                    description: URL-friendly identifier
                                type:
                                    type: string
                                    enum:
                                        - single
                                        - multiple
                                        - range
                                        - boolean
                                        - text
                                    example: "single"
                                    description: |
                                        Attribute type:
                                        - single: One option from list (e.g., color)
                                        - multiple: Multiple options (e.g., connectivity: WiFi, Bluetooth)
                                        - range: Numeric value with optional unit (e.g., RAM: 8 GB)
                                        - boolean: Yes/No value (e.g., waterproof)
                                        - text: Free text (e.g., custom engraving)
                                unit:
                                    type: string
                                    example: "GB"
                                    maxLength: 20
                                    description: Unit for range type (GB, kg, mm, etc.)
                                enabled:
                                    type: boolean
                                    example: true
                                options:
                                    type: array
                                    description: Options for single/multiple types
                                    items:
                                        type: object
                                        description: |
                                            Input for creating/updating an attribute option.
                                            - slug is immutable: set once during creation, used as identifier for updates
                                            - To update an option, use the same slug with new name/colorCode/sortOrder
                                        required:
                                            - name
                                            - slug
                                        properties:
                                            name:
                                                type: string
                                                example: "Red"
                                                minLength: 1
                                                maxLength: 100
                                            slug:
                                                type: string
                                                example: "red"
                                                minLength: 1
                                                maxLength: 50
                                                pattern: "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                                                description: |
                                                    URL-friendly identifier. Immutable after creation.
                                                    Used as identifier for updates.
                                            colorCode:
                                                type: string
                                                example: "#FF0000"
                                                pattern: "^#[0-9A-Fa-f]{6}$"
                                                description: Hex color code for color attributes
                                            sortOrder:
                                                type: integer
                                                example: 1
                                                minimum: 0
                                                maximum: 10000
            responses:
                "200":
                    description: Attribute created successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - id
                                    - version
                                    - name
                                    - slug
                                    - type
                                    - enabled
                                    - createdAt
                                    - modifiedAt
                                properties:
                                    id:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    version:
                                        type: integer
                                        example: 1
                                    name:
                                        type: string
                                        example: "Color"
                                    slug:
                                        type: string
                                        example: "color"
                                    type:
                                        type: string
                                        enum:
                                            - single
                                            - multiple
                                            - range
                                            - boolean
                                            - text
                                        example: "single"
                                    unit:
                                        type: string
                                        example: "GB"
                                    enabled:
                                        type: boolean
                                        example: true
                                    options:
                                        type: array
                                        items:
                                            type: object
                                            description: Embedded attribute option
                                            required:
                                                - name
                                                - slug
                                                - sortOrder
                                            properties:
                                                name:
                                                    type: string
                                                    example: "Red"
                                                slug:
                                                    type: string
                                                    example: "red"
                                                colorCode:
                                                    type: string
                                                    example: "#FF0000"
                                                sortOrder:
                                                    type: integer
                                                    example: 1
                                    createdAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-01T00:00:00Z"
                                    modifiedAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-02T00:00:00Z"
                "400":
                    description: Validation error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "409":
                    description: Attribute with this slug already exists
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/category/update:
        put:
            summary: Update an existing category
            operationId: updateCategory
            tags:
                - Categories
            security:
                - BearerAuth:
                    - categories:write
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - id
                                - name
                                - enabled
                                - version
                            properties:
                                id:
                                    type: string
                                    format: uuid
                                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                name:
                                    type: string
                                    example: "Smartphones"
                                    minLength: 2
                                    maxLength: 100
                                enabled:
                                    type: boolean
                                    example: true
                                version:
                                    type: integer
                                    example: 1
                                    minimum: 1
                                    description: Optimistic locking version
                                attributes:
                                    type: array
                                    description: List of attributes assigned to this category
                                    items:
                                        type: object
                                        description: Input for assigning an attribute to a category
                                        required:
                                            - attributeId
                                            - role
                                            - filterable
                                            - searchable
                                        properties:
                                            attributeId:
                                                type: string
                                                format: uuid
                                                pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                                example: "123e4567-e89b-12d3-a456-426614174000"
                                            role:
                                                type: string
                                                enum:
                                                    - variant
                                                    - specification
                                                example: "specification"
                                                description: |
                                                    How this attribute is used in this category:
                                                    - variant: Creates product variants (color, size) - buyer can choose
                                                    - specification: Describes the product (processor, screen) - shown in specs
                                            required:
                                                type: boolean
                                                example: false
                                                description: Whether products must have this attribute
                                            sortOrder:
                                                type: integer
                                                example: 1
                                                minimum: 0
                                                maximum: 10000
                                            filterable:
                                                type: boolean
                                                example: true
                                                description: Whether this attribute can be used as a filter
                                            searchable:
                                                type: boolean
                                                example: false
                                                description: Whether this attribute value is included in search
            responses:
                "200":
                    description: Category updated successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - id
                                    - version
                                    - name
                                    - enabled
                                    - createdAt
                                    - modifiedAt
                                properties:
                                    id:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    version:
                                        type: integer
                                        example: 1
                                    name:
                                        type: string
                                        example: "Smartphones"
                                    enabled:
                                        type: boolean
                                        example: true
                                    createdAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-01T00:00:00Z"
                                    modifiedAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-02T00:00:00Z"
                                    attributes:
                                        type: array
                                        description: List of attributes assigned to this category
                                        items:
                                            type: object
                                            description: Embedded category attribute
                                            required:
                                                - attributeId
                                                - role
                                                - required
                                                - sortOrder
                                                - filterable
                                                - searchable
                                            properties:
                                                attributeId:
                                                    type: string
                                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                                role:
                                                    type: string
                                                    enum:
                                                        - variant
                                                        - specification
                                                    example: "specification"
                                                required:
                                                    type: boolean
                                                    example: false
                                                sortOrder:
                                                    type: integer
                                                    example: 1
                                                filterable:
                                                    type: boolean
                                                    example: true
                                                searchable:
                                                    type: boolean
                                                    example: false
                "400":
                    description: Validation error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "404":
                    description: Category not found
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "412":
                    description: Version mismatch (optimistic locking)
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/attribute/update:
        put:
            summary: Update an existing attribute
            operationId: updateAttribute
            tags:
                - Attributes
            security:
                - BearerAuth:
                    - attributes:write
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - id
                                - name
                                - enabled
                                - version
                            properties:
                                id:
                                    type: string
                                    format: uuid
                                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                name:
                                    type: string
                                    example: "Color"
                                    minLength: 2
                                    maxLength: 100
                                unit:
                                    type: string
                                    example: "GB"
                                    maxLength: 20
                                enabled:
                                    type: boolean
                                    example: true
                                version:
                                    type: integer
                                    example: 1
                                    minimum: 1
                                    description: Optimistic locking version
                                options:
                                    type: array
                                    description: |
                                        Options for single/multiple types.
                                        - To add option: include new option with slug
                                        - To update option: include existing option with same slug
                                        - To remove option: omit option from array (only if not used by products)
                                    items:
                                        type: object
                                        description: |
                                            Input for creating/updating an attribute option.
                                            - slug is immutable: set once during creation, used as identifier for updates
                                            - To update an option, use the same slug with new name/colorCode/sortOrder
                                        required:
                                            - name
                                            - slug
                                        properties:
                                            name:
                                                type: string
                                                example: "Red"
                                                minLength: 1
                                                maxLength: 100
                                            slug:
                                                type: string
                                                example: "red"
                                                minLength: 1
                                                maxLength: 50
                                                pattern: "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                                                description: |
                                                    URL-friendly identifier. Immutable after creation.
                                                    Used as identifier for updates.
                                            colorCode:
                                                type: string
                                                example: "#FF0000"
                                                pattern: "^#[0-9A-Fa-f]{6}$"
                                                description: Hex color code for color attributes
                                            sortOrder:
                                                type: integer
                                                example: 1
                                                minimum: 0
                                                maximum: 10000
            responses:
                "200":
                    description: Attribute updated successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - id
                                    - version
                                    - name
                                    - slug
                                    - type
                                    - enabled
                                    - createdAt
                                    - modifiedAt
                                properties:
                                    id:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    version:
                                        type: integer
                                        example: 1
                                    name:
                                        type: string
                                        example: "Color"
                                    slug:
                                        type: string
                                        example: "color"
                                    type:
                                        type: string
                                        enum:
                                            - single
                                            - multiple
                                            - range
                                            - boolean
                                            - text
                                        example: "single"
                                    unit:
                                        type: string
                                        example: "GB"
                                    enabled:
                                        type: boolean
                                        example: true
                                    options:
                                        type: array
                                        items:
                                            type: object
                                            description: Embedded attribute option
                                            required:
                                                - name
                                                - slug
                                                - sortOrder
                                            properties:
                                                name:
                                                    type: string
                                                    example: "Red"
                                                slug:
                                                    type: string
                                                    example: "red"
                                                colorCode:
                                                    type: string
                                                    example: "#FF0000"
                                                sortOrder:
                                                    type: integer
                                                    example: 1
                                    createdAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-01T00:00:00Z"
                                    modifiedAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-02T00:00:00Z"
                "400":
                    description: Validation error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "404":
                    description: Attribute not found
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "409":
                    description: Attribute with this slug already exists
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "412":
                    description: Version mismatch (optimistic locking)
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/product/update:
        put:
            summary: Update an existing product
            operationId: updateProduct
            tags:
                - Products
            security:
                - BearerAuth:
                    - products:write
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - id
                                - name
                                - enabled
                                - price
                                - quantity
                                - version
                            properties:
                                id:
                                    type: string
                                    format: uuid
                                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                name:
                                    type: string
                                    example: "iPhone 15 Pro"
                                    minLength: 2
                                    maxLength: 100
                                description:
                                    type: string
                                    example: "Latest iPhone with A17 Pro chip"
                                    maxLength: 2000
                                price:
                                    type: number
                                    example: 999.99
                                    minimum: 0
                                    maximum: 100000000
                                quantity:
                                    type: integer
                                    example: 100
                                    minimum: 0
                                    maximum: 100000000
                                imageId:
                                    type: string
                                    format: uuid
                                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                categoryId:
                                    type: string
                                    format: uuid
                                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                enabled:
                                    type: boolean
                                    example: true
                                version:
                                    type: integer
                                    example: 1
                                    minimum: 1
                                    description: Optimistic locking version
                                attributes:
                                    type: array
                                    description: List of attribute values for this product
                                    items:
                                        type: object
                                        description: Input for assigning an attribute value to a product
                                        required:
                                            - attributeId
                                        properties:
                                            attributeId:
                                                type: string
                                                format: uuid
                                                pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                                                example: "123e4567-e89b-12d3-a456-426614174000"
                                                description: Reference to the attribute definition
                                            optionSlugValue:
                                                type: string
                                                example: "red"
                                                maxLength: 50
                                                description: Slug of the selected option (for single type)
                                            optionSlugValues:
                                                type: array
                                                description: Slugs of selected options (for multiple type)
                                                items:
                                                    type: string
                                                    maxLength: 50
                                                example: ["wifi", "bluetooth", "nfc"]
                                            numericValue:
                                                type: number
                                                example: 128
                                                description: Numeric value (for range type - e.g., RAM, storage)
                                            textValue:
                                                type: string
                                                example: "Custom engraving text"
                                                maxLength: 2000
                                                description: Free text value (for text type)
                                            booleanValue:
                                                type: boolean
                                                example: true
                                                description: Boolean value (for boolean type)
            responses:
                "200":
                    description: Product updated successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - id
                                    - version
                                    - name
                                    - price
                                    - quantity
                                    - enabled
                                    - createdAt
                                    - modifiedAt
                                properties:
                                    id:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    version:
                                        type: integer
                                        example: 1
                                    name:
                                        type: string
                                        example: "iPhone 15 Pro"
                                    description:
                                        type: string
                                        example: "Latest iPhone with A17 Pro chip"
                                    price:
                                        type: number
                                        example: 999.99
                                    quantity:
                                        type: integer
                                        example: 100
                                    imageId:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    categoryId:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    enabled:
                                        type: boolean
                                        example: true
                                    createdAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-01T00:00:00Z"
                                    modifiedAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-02T00:00:00Z"
                                    attributes:
                                        type: array
                                        description: List of attribute values for this product
                                        items:
                                            type: object
                                            description: Embedded product attribute with value
                                            required:
                                                - attributeId
                                            properties:
                                                attributeId:
                                                    type: string
                                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                                    description: Reference to the attribute definition
                                                optionSlugValue:
                                                    type: string
                                                    example: "red"
                                                    description: Slug of the selected option (for single type)
                                                optionSlugValues:
                                                    type: array
                                                    description: Slugs of selected options (for multiple type)
                                                    items:
                                                        type: string
                                                    example: ["wifi", "bluetooth", "nfc"]
                                                numericValue:
                                                    type: number
                                                    example: 128
                                                    description: Numeric value (for range type)
                                                textValue:
                                                    type: string
                                                    example: "Custom engraving text"
                                                    description: Free text value (for text type)
                                                booleanValue:
                                                    type: boolean
                                                    example: true
                                                    description: Boolean value (for boolean type)
                "400":
                    description: Validation error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "401":
                    description: Unauthorized
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "403":
                    description: Forbidden - insufficient permissions
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "404":
                    description: Product not found
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "412":
                    description: Version mismatch (optimistic locking)
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/category/get/{id}:
        get:
            summary: Get a category by ID
            operationId: getCategoryById
            tags:
                - Categories
            security:
                - BearerAuth:
                    - categories:read
            parameters:
                - name: id
                  in: path
                  required: true
                  schema:
                    type: string
                    format: uuid
                  description: Category UUID
            responses:
                "200":
                    description: Category retrieved successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - id
                                    - version
                                    - name
                                    - enabled
                                    - createdAt
                                    - modifiedAt
                                properties:
                                    id:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    version:
                                        type: integer
                                        example: 1
                                    name:
                                        type: string
                                        example: "Smartphones"
                                    enabled:
                                        type: boolean
                                        example: true
                                    createdAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-01T00:00:00Z"
                                    modifiedAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-02T00:00:00Z"
                                    attributes:
                                        type: array
                                        description: List of attributes assigned to this category
                                        items:
                                            type: object
                                            description: Embedded category attribute
                                            required:
                                                - attributeId
                                                - role
                                                - required
                                                - sortOrder
                                                - filterable
                                                - searchable
                                            properties:
                                                attributeId:
                                                    type: string
                                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                                role:
                                                    type: string
                                                    enum:
                                                        - variant
                                                        - specification
                                                    example: "specification"
                                                required:
                                                    type: boolean
                                                    example: false
                                                sortOrder:
                                                    type: integer
                                                    example: 1
                                                filterable:
                                                    type: boolean
                                                    example: true
                                                searchable:
                                                    type: boolean
                                                    example: false
                "404":
                    description: Category not found
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/attribute/get/{id}:
        get:
            summary: Get an attribute by ID
            operationId: getAttributeById
            tags:
                - Attributes
            security:
                - BearerAuth:
                    - attributes:read
            parameters:
                - name: id
                  in: path
                  required: true
                  schema:
                    type: string
                    format: uuid
                  description: Attribute UUID
            responses:
                "200":
                    description: Attribute retrieved successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - id
                                    - version
                                    - name
                                    - slug
                                    - type
                                    - enabled
                                    - createdAt
                                    - modifiedAt
                                properties:
                                    id:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    version:
                                        type: integer
                                        example: 1
                                    name:
                                        type: string
                                        example: "Color"
                                    slug:
                                        type: string
                                        example: "color"
                                    type:
                                        type: string
                                        enum:
                                            - single
                                            - multiple
                                            - range
                                            - boolean
                                            - text
                                        example: "single"
                                    unit:
                                        type: string
                                        example: "GB"
                                    enabled:
                                        type: boolean
                                        example: true
                                    options:
                                        type: array
                                        items:
                                            type: object
                                            description: Embedded attribute option
                                            required:
                                                - name
                                                - slug
                                                - sortOrder
                                            properties:
                                                name:
                                                    type: string
                                                    example: "Red"
                                                slug:
                                                    type: string
                                                    example: "red"
                                                colorCode:
                                                    type: string
                                                    example: "#FF0000"
                                                sortOrder:
                                                    type: integer
                                                    example: 1
                                    createdAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-01T00:00:00Z"
                                    modifiedAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-02T00:00:00Z"
                "404":
                    description: Attribute not found
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/product/get/{id}:
        get:
            summary: Get a product by ID
            operationId: getProductById
            tags:
                - Products
            security:
                - BearerAuth:
                    - products:read
            parameters:
                - name: id
                  in: path
                  required: true
                  schema:
                    type: string
                    format: uuid
                  description: Product UUID
            responses:
                "200":
                    description: Product retrieved successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - id
                                    - version
                                    - name
                                    - price
                                    - quantity
                                    - enabled
                                    - createdAt
                                    - modifiedAt
                                properties:
                                    id:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    version:
                                        type: integer
                                        example: 1
                                    name:
                                        type: string
                                        example: "iPhone 15 Pro"
                                    description:
                                        type: string
                                        example: "Latest iPhone with A17 Pro chip"
                                    price:
                                        type: number
                                        example: 999.99
                                    quantity:
                                        type: integer
                                        example: 100
                                    imageId:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    categoryId:
                                        type: string
                                        example: "123e4567-e89b-12d3-a456-426614174000"
                                    enabled:
                                        type: boolean
                                        example: true
                                    createdAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-01T00:00:00Z"
                                    modifiedAt:
                                        type: string
                                        format: date-time
                                        example: "2023-01-02T00:00:00Z"
                                    attributes:
                                        type: array
                                        description: List of attribute values for this product
                                        items:
                                            type: object
                                            description: Embedded product attribute with value
                                            required:
                                                - attributeId
                                            properties:
                                                attributeId:
                                                    type: string
                                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                                    description: Reference to the attribute definition
                                                optionSlugValue:
                                                    type: string
                                                    example: "red"
                                                    description: Slug of the selected option (for single type)
                                                optionSlugValues:
                                                    type: array
                                                    description: Slugs of selected options (for multiple type)
                                                    items:
                                                        type: string
                                                    example: ["wifi", "bluetooth", "nfc"]
                                                numericValue:
                                                    type: number
                                                    example: 128
                                                    description: Numeric value (for range type)
                                                textValue:
                                                    type: string
                                                    example: "Custom engraving text"
                                                    description: Free text value (for text type)
                                                booleanValue:
                                                    type: boolean
                                                    example: true
                                                    description: Boolean value (for boolean type)
                "401":
                    description: Unauthorized
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "403":
                    description: Forbidden - insufficient permissions
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "404":
                    description: Product not found
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/category/list:
        get:
            summary: Get a paginated list of categories
            operationId: getCategoryList
            tags:
                - Categories
            security:
                - BearerAuth:
                    - categories:read
            parameters:
                - name: page
                  in: query
                  required: true
                  schema:
                    type: integer
                    minimum: 1
                    example: 1
                  description: Page number (1-based)
                - name: size
                  in: query
                  required: true
                  schema:
                    type: integer
                    minimum: 1
                    maximum: 100
                    example: 20
                  description: Number of items per page (max 100)
                - name: enabled
                  in: query
                  required: false
                  schema:
                    type: boolean
                    example: true
                  description: Filter by enabled status
                - name: sort
                  in: query
                  required: false
                  schema:
                    type: string
                    enum:
                        - name
                        - createdAt
                        - modifiedAt
                    example: createdAt
                  description: Field to sort by
                - name: order
                  in: query
                  required: false
                  schema:
                    type: string
                    enum:
                        - asc
                        - desc
                    default: desc
                    example: desc
                  description: Sort order
            responses:
                "200":
                    description: List of categories retrieved successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - items
                                    - page
                                    - size
                                    - total
                                properties:
                                    items:
                                        type: array
                                        items:
                                            type: object
                                            required:
                                                - id
                                                - version
                                                - name
                                                - enabled
                                                - createdAt
                                                - modifiedAt
                                            properties:
                                                id:
                                                    type: string
                                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                                version:
                                                    type: integer
                                                    example: 1
                                                name:
                                                    type: string
                                                    example: "Smartphones"
                                                enabled:
                                                    type: boolean
                                                    example: true
                                                createdAt:
                                                    type: string
                                                    format: date-time
                                                    example: "2023-01-01T00:00:00Z"
                                                modifiedAt:
                                                    type: string
                                                    format: date-time
                                                    example: "2023-01-02T00:00:00Z"
                                                attributes:
                                                    type: array
                                                    description: List of attributes assigned to this category
                                                    items:
                                                        type: object
                                                        description: Embedded category attribute
                                                        required:
                                                            - attributeId
                                                            - role
                                                            - required
                                                            - sortOrder
                                                            - filterable
                                                            - searchable
                                                        properties:
                                                            attributeId:
                                                                type: string
                                                                example: "123e4567-e89b-12d3-a456-426614174000"
                                                            role:
                                                                type: string
                                                                enum:
                                                                    - variant
                                                                    - specification
                                                                example: "specification"
                                                            required:
                                                                type: boolean
                                                                example: false
                                                            sortOrder:
                                                                type: integer
                                                                example: 1
                                                            filterable:
                                                                type: boolean
                                                                example: true
                                                            searchable:
                                                                type: boolean
                                                                example: false
                                    page:
                                        type: integer
                                        example: 1
                                        description: Current page number
                                    size:
                                        type: integer
                                        example: 20
                                        description: Number of items per page
                                    total:
                                        type: integer
                                        example: 100
                                        description: Total number of items
                "400":
                    description: Validation error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/attribute/list:
        get:
            summary: Get a paginated list of attributes
            operationId: getAttributeList
            tags:
                - Attributes
            security:
                - BearerAuth:
                    - attributes:read
            parameters:
                - name: page
                  in: query
                  required: true
                  schema:
                    type: integer
                    minimum: 1
                    example: 1
                  description: Page number (1-based)
                - name: size
                  in: query
                  required: true
                  schema:
                    type: integer
                    minimum: 1
                    maximum: 100
                    example: 20
                  description: Number of items per page (max 100)
                - name: enabled
                  in: query
                  required: false
                  schema:
                    type: boolean
                    example: true
                  description: Filter by enabled status
                - name: type
                  in: query
                  required: false
                  schema:
                    type: string
                    enum:
                        - single
                        - multiple
                        - range
                        - boolean
                        - text
                  description: Filter by attribute type
                - name: sort
                  in: query
                  required: false
                  schema:
                    type: string
                    enum:
                        - name
                        - slug
                        - createdAt
                        - modifiedAt
                    example: name
                  description: Field to sort by
                - name: order
                  in: query
                  required: false
                  schema:
                    type: string
                    enum:
                        - asc
                        - desc
                    default: asc
                    example: asc
                  description: Sort order
            responses:
                "200":
                    description: List of attributes retrieved successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - items
                                    - page
                                    - size
                                    - total
                                properties:
                                    items:
                                        type: array
                                        items:
                                            type: object
                                            required:
                                                - id
                                                - version
                                                - name
                                                - slug
                                                - type
                                                - enabled
                                                - createdAt
                                                - modifiedAt
                                            properties:
                                                id:
                                                    type: string
                                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                                version:
                                                    type: integer
                                                    example: 1
                                                name:
                                                    type: string
                                                    example: "Color"
                                                slug:
                                                    type: string
                                                    example: "color"
                                                type:
                                                    type: string
                                                    enum:
                                                        - single
                                                        - multiple
                                                        - range
                                                        - boolean
                                                        - text
                                                    example: "single"
                                                unit:
                                                    type: string
                                                    example: "GB"
                                                enabled:
                                                    type: boolean
                                                    example: true
                                                options:
                                                    type: array
                                                    items:
                                                        type: object
                                                        description: Embedded attribute option
                                                        required:
                                                            - name
                                                            - slug
                                                            - sortOrder
                                                        properties:
                                                            name:
                                                                type: string
                                                                example: "Red"
                                                            slug:
                                                                type: string
                                                                example: "red"
                                                            colorCode:
                                                                type: string
                                                                example: "#FF0000"
                                                            sortOrder:
                                                                type: integer
                                                                example: 1
                                                createdAt:
                                                    type: string
                                                    format: date-time
                                                    example: "2023-01-01T00:00:00Z"
                                                modifiedAt:
                                                    type: string
                                                    format: date-time
                                                    example: "2023-01-02T00:00:00Z"
                                    page:
                                        type: integer
                                        example: 1
                                        description: Current page number
                                    size:
                                        type: integer
                                        example: 20
                                        description: Number of items per page
                                    total:
                                        type: integer
                                        example: 100
                                        description: Total number of items
                "400":
                    description: Validation error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/product/list:
        get:
            summary: Get a paginated list of products
            operationId: getProductList
            tags:
                - Products
            security:
                - BearerAuth:
                    - products:read
            parameters:
                - name: page
                  in: query
                  required: true
                  schema:
                    type: integer
                    minimum: 1
                    example: 1
                  description: Page number (1-based)
                - name: size
                  in: query
                  required: true
                  schema:
                    type: integer
                    minimum: 1
                    maximum: 100
                    example: 20
                  description: Number of items per page (max 100)
                - name: enabled
                  in: query
                  required: false
                  schema:
                    type: boolean
                    example: true
                  description: Filter by enabled status
                - name: categoryId
                  in: query
                  required: false
                  schema:
                    type: string
                    format: uuid
                    example: "123e4567-e89b-12d3-a456-426614174000"
                  description: Filter by category ID
                - name: sort
                  in: query
                  required: false
                  schema:
                    type: string
                    enum:
                        - name
                        - price
                        - quantity
                        - createdAt
                        - modifiedAt
                        - categoryId
                    example: createdAt
                  description: Field to sort by
                - name: order
                  in: query
                  required: false
                  schema:
                    type: string
                    enum:
                        - asc
                        - desc
                    default: desc
                    example: desc
                  description: Sort order
            responses:
                "200":
                    description: List of products retrieved successfully
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - items
                                    - page
                                    - size
                                    - total
                                properties:
                                    items:
                                        type: array
                                        items:
                                            type: object
                                            required:
                                                - id
                                                - version
                                                - name
                                                - price
                                                - quantity
                                                - enabled
                                                - createdAt
                                                - modifiedAt
                                            properties:
                                                id:
                                                    type: string
                                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                                version:
                                                    type: integer
                                                    example: 1
                                                name:
                                                    type: string
                                                    example: "iPhone 15 Pro"
                                                description:
                                                    type: string
                                                    example: "Latest iPhone with A17 Pro chip"
                                                price:
                                                    type: number
                                                    example: 999.99
                                                quantity:
                                                    type: integer
                                                    example: 100
                                                imageId:
                                                    type: string
                                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                                categoryId:
                                                    type: string
                                                    example: "123e4567-e89b-12d3-a456-426614174000"
                                                enabled:
                                                    type: boolean
                                                    example: true
                                                createdAt:
                                                    type: string
                                                    format: date-time
                                                    example: "2023-01-01T00:00:00Z"
                                                modifiedAt:
                                                    type: string
                                                    format: date-time
                                                    example: "2023-01-02T00:00:00Z"
                                                attributes:
                                                    type: array
                                                    description: List of attribute values for this product
                                                    items:
                                                        type: object
                                                        description: Embedded product attribute with value
                                                        required:
                                                            - attributeId
                                                        properties:
                                                            attributeId:
                                                                type: string
                                                                example: "123e4567-e89b-12d3-a456-426614174000"
                                                                description: Reference to the attribute definition
                                                            optionSlugValue:
                                                                type: string
                                                                example: "red"
                                                                description: Slug of the selected option (for single type)
                                                            optionSlugValues:
                                                                type: array
                                                                description: Slugs of selected options (for multiple type)
                                                                items:
                                                                    type: string
                                                                example: ["wifi", "bluetooth", "nfc"]
                                                            numericValue:
                                                                type: number
                                                                example: 128
                                                                description: Numeric value (for range type)
                                                            textValue:
                                                                type: string
                                                                example: "Custom engraving text"
                                                                description: Free text value (for text type)
                                                            booleanValue:
                                                                type: boolean
                                                                example: true
                                                                description: Boolean value (for boolean type)
                                    page:
                                        type: integer
                                        example: 1
                                        description: Current page number
                                    size:
                                        type: integer
                                        example: 20
                                        description: Number of items per page
                                    total:
                                        type: integer
                                        example: 100
                                        description: Total number of items
                "400":
                    description: Validation error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "401":
                    description: Unauthorized
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "403":
                    description: Forbidden - insufficient permissions
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
    /v1/attribute/delete/{id}:
        delete:
            summary: Delete an attribute by ID
            operationId: deleteAttribute
            tags:
                - Attributes
            security:
                - BearerAuth:
                    - attributes:delete
            parameters:
                - name: id
                  in: path
                  required: true
                  schema:
                    type: string
                    format: uuid
                  description: Attribute UUID
            responses:
                "204":
                    description: Attribute deleted successfully
                "404":
                    description: Attribute not found
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "409":
                    description: Attribute is in use and cannot be deleted
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
                "500":
                    description: Internal Server Error
                    content:
                        application/problem+json:
                            schema:
                                type: object
                                description: RFC7807 Problem Details
                                required:
                                    - type
                                    - title
                                    - status
                                properties:
                                    type:
                                        type: string
                                        format: uri
                                        example: "https://api.example.com/problems/validation-error"
                                    title:
                                        type: string
                                        example: "Validation Error"
                                    status:
                                        type: integer
                                        example: 400
                                    detail:
                                        type: string
                                        example: "One or more fields failed validation"
                                    instance:
                                        type: string
                                        format: uri
                                        example: "/v1/product/create"
                                    traceId:
                                        type: string
                                        example: "abc123def456"
                                    errors:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                field:
                                                    type: string
                                                    example: "name"
                                                message:
                                                    type: string
                                                    example: "Name is required"
components:
    securitySchemes:
        BearerAuth:
            type: http
            scheme: bearer
            description: PASETO token in Authorization header
    schemas:
        Problem:
            type: object
            description: RFC7807 Problem Details
            required:
                - type
                - title
                - status
            properties:
                type:
                    type: string
                    format: uri
                    example: "https://api.example.com/problems/validation-error"
                title:
                    type: string
                    example: "Validation Error"
                status:
                    type: integer
                    example: 400
                detail:
                    type: string
                    example: "One or more fields failed validation"
                instance:
                    type: string
                    format: uri
                    example: "/v1/product/create"
                traceId:
                    type: string
                    example: "abc123def456"
                errors:
                    type: array
                    items:
                        type: object
                        properties:
                            field:
                                type: string
                                example: "name"
                            message:
                                type: string
                                example: "Name is required"
        AttributeResponse:
            type: object
            required:
                - id
                - version
                - name
                - slug
                - type
                - enabled
                - createdAt
                - modifiedAt
            properties:
                id:
                    type: string
                    example: "123e4567-e89b-12d3-a456-426614174000"
                version:
                    type: integer
                    example: 1
                name:
                    type: string
                    example: "Color"
                slug:
                    type: string
                    example: "color"
                type:
                    type: string
                    enum:
                        - single
                        - multiple
                        - range
                        - boolean
                        - text
                    example: "single"
                unit:
                    type: string
                    example: "GB"
                enabled:
                    type: boolean
                    example: true
                createdAt:
                    type: string
                    format: date-time
                    example: "2023-01-01T00:00:00Z"
                modifiedAt:
                    type: string
                    format: date-time
                    example: "2023-01-02T00:00:00Z"
        AttributeListResponse:
            type: object
            required:
                - items
                - page
                - size
                - total
            properties:
                page:
                    type: integer
                    example: 1
                    description: Current page number
                size:
                    type: integer
                    example: 20
                    description: Number of items per page
                total:
                    type: integer
                    example: 100
                    description: Total number of items
        AttributeOption:
            type: object
            description: Embedded attribute option
            required:
                - name
                - slug
                - sortOrder
            properties:
                name:
                    type: string
                    example: "Red"
                slug:
                    type: string
                    example: "red"
                colorCode:
                    type: string
                    example: "#FF0000"
                sortOrder:
                    type: integer
                    example: 1
        AttributeOptionInput:
            type: object
            description: |
                Input for creating/updating an attribute option.
                - slug is immutable: set once during creation, used as identifier for updates
                - To update an option, use the same slug with new name/colorCode/sortOrder
            required:
                - name
                - slug
            properties:
                name:
                    type: string
                    example: "Red"
                    minLength: 1
                    maxLength: 100
                slug:
                    type: string
                    example: "red"
                    minLength: 1
                    maxLength: 50
                    pattern: "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                    description: |
                        URL-friendly identifier. Immutable after creation.
                        Used as identifier for updates.
                colorCode:
                    type: string
                    example: "#FF0000"
                    pattern: "^#[0-9A-Fa-f]{6}$"
                    description: Hex color code for color attributes
                sortOrder:
                    type: integer
                    example: 1
                    minimum: 0
                    maximum: 10000
        CreateAttributeRequest:
            type: object
            required:
                - name
                - slug
                - type
                - enabled
            properties:
                id:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                    description: Optional client-generated UUID
                name:
                    type: string
                    example: "Color"
                    minLength: 2
                    maxLength: 100
                slug:
                    type: string
                    example: "color"
                    minLength: 2
                    maxLength: 50
                    pattern: "^[a-z0-9]+(?:-[a-z0-9]+)*$"
                    description: URL-friendly identifier
                type:
                    type: string
                    enum:
                        - single
                        - multiple
                        - range
                        - boolean
                        - text
                    example: "single"
                    description: |
                        Attribute type:
                        - single: One option from list (e.g., color)
                        - multiple: Multiple options (e.g., connectivity: WiFi, Bluetooth)
                        - range: Numeric value with optional unit (e.g., RAM: 8 GB)
                        - boolean: Yes/No value (e.g., waterproof)
                        - text: Free text (e.g., custom engraving)
                unit:
                    type: string
                    example: "GB"
                    maxLength: 20
                    description: Unit for range type (GB, kg, mm, etc.)
                enabled:
                    type: boolean
                    example: true
        UpdateAttributeRequest:
            type: object
            required:
                - id
                - name
                - enabled
                - version
            properties:
                id:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                name:
                    type: string
                    example: "Color"
                    minLength: 2
                    maxLength: 100
                unit:
                    type: string
                    example: "GB"
                    maxLength: 20
                enabled:
                    type: boolean
                    example: true
                version:
                    type: integer
                    example: 1
                    minimum: 1
                    description: Optimistic locking version
        CategoryResponse:
            type: object
            required:
                - id
                - version
                - name
                - enabled
                - createdAt
                - modifiedAt
            properties:
                id:
                    type: string
                    example: "123e4567-e89b-12d3-a456-426614174000"
                version:
                    type: integer
                    example: 1
                name:
                    type: string
                    example: "Smartphones"
                enabled:
                    type: boolean
                    example: true
                createdAt:
                    type: string
                    format: date-time
                    example: "2023-01-01T00:00:00Z"
                modifiedAt:
                    type: string
                    format: date-time
                    example: "2023-01-02T00:00:00Z"
        CategoryListResponse:
            type: object
            required:
                - items
                - page
                - size
                - total
            properties:
                page:
                    type: integer
                    example: 1
                    description: Current page number
                size:
                    type: integer
                    example: 20
                    description: Number of items per page
                total:
                    type: integer
                    example: 100
                    description: Total number of items
        CategoryAttribute:
            type: object
            description: Embedded category attribute
            required:
                - attributeId
                - role
                - required
                - sortOrder
                - filterable
                - searchable
            properties:
                attributeId:
                    type: string
                    example: "123e4567-e89b-12d3-a456-426614174000"
                role:
                    type: string
                    enum:
                        - variant
                        - specification
                    example: "specification"
                required:
                    type: boolean
                    example: false
                sortOrder:
                    type: integer
                    example: 1
                filterable:
                    type: boolean
                    example: true
                searchable:
                    type: boolean
                    example: false
        CategoryAttributeInput:
            type: object
            description: Input for assigning an attribute to a category
            required:
                - attributeId
                - role
                - filterable
                - searchable
            properties:
                attributeId:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                role:
                    type: string
                    enum:
                        - variant
                        - specification
                    example: "specification"
                    description: |
                        How this attribute is used in this category:
                        - variant: Creates product variants (color, size) - buyer can choose
                        - specification: Describes the product (processor, screen) - shown in specs
                required:
                    type: boolean
                    example: false
                    description: Whether products must have this attribute
                sortOrder:
                    type: integer
                    example: 1
                    minimum: 0
                    maximum: 10000
                filterable:
                    type: boolean
                    example: true
                    description: Whether this attribute can be used as a filter
                searchable:
                    type: boolean
                    example: false
                    description: Whether this attribute value is included in search
        CreateCategoryRequest:
            type: object
            required:
                - name
                - enabled
            properties:
                id:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                    description: Optional client-generated UUID
                name:
                    type: string
                    example: "Smartphones"
                    minLength: 2
                    maxLength: 100
                enabled:
                    type: boolean
                    example: true
        UpdateCategoryRequest:
            type: object
            required:
                - id
                - name
                - enabled
                - version
            properties:
                id:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                name:
                    type: string
                    example: "Smartphones"
                    minLength: 2
                    maxLength: 100
                enabled:
                    type: boolean
                    example: true
                version:
                    type: integer
                    example: 1
                    minimum: 1
                    description: Optimistic locking version
        ProductResponse:
            type: object
            required:
                - id
                - version
                - name
                - price
                - quantity
                - enabled
                - createdAt
                - modifiedAt
            properties:
                id:
                    type: string
                    example: "123e4567-e89b-12d3-a456-426614174000"
                version:
                    type: integer
                    example: 1
                name:
                    type: string
                    example: "iPhone 15 Pro"
                description:
                    type: string
                    example: "Latest iPhone with A17 Pro chip"
                price:
                    type: number
                    example: 999.99
                quantity:
                    type: integer
                    example: 100
                imageId:
                    type: string
                    example: "123e4567-e89b-12d3-a456-426614174000"
                categoryId:
                    type: string
                    example: "123e4567-e89b-12d3-a456-426614174000"
                enabled:
                    type: boolean
                    example: true
                createdAt:
                    type: string
                    format: date-time
                    example: "2023-01-01T00:00:00Z"
                modifiedAt:
                    type: string
                    format: date-time
                    example: "2023-01-02T00:00:00Z"
        ProductListResponse:
            type: object
            required:
                - items
                - page
                - size
                - total
            properties:
                page:
                    type: integer
                    example: 1
                    description: Current page number
                size:
                    type: integer
                    example: 20
                    description: Number of items per page
                total:
                    type: integer
                    example: 100
                    description: Total number of items
        AttributeValue:
            type: object
            description: Embedded product attribute with value
            required:
                - attributeId
            properties:
                attributeId:
                    type: string
                    example: "123e4567-e89b-12d3-a456-426614174000"
                    description: Reference to the attribute definition
                optionSlugValue:
                    type: string
                    example: "red"
                    description: Slug of the selected option (for single type)
                optionSlugValues:
                    type: array
                    description: Slugs of selected options (for multiple type)
                    items:
                        type: string
                    example: ["wifi", "bluetooth", "nfc"]
                numericValue:
                    type: number
                    example: 128
                    description: Numeric value (for range type)
                textValue:
                    type: string
                    example: "Custom engraving text"
                    description: Free text value (for text type)
                booleanValue:
                    type: boolean
                    example: true
                    description: Boolean value (for boolean type)
        AttributeValueInput:
            type: object
            description: Input for assigning an attribute value to a product
            required:
                - attributeId
            properties:
                attributeId:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                    description: Reference to the attribute definition
                optionSlugValue:
                    type: string
                    example: "red"
                    maxLength: 50
                    description: Slug of the selected option (for single type)
                optionSlugValues:
                    type: array
                    description: Slugs of selected options (for multiple type)
                    items:
                        type: string
                        maxLength: 50
                    example: ["wifi", "bluetooth", "nfc"]
                numericValue:
                    type: number
                    example: 128
                    description: Numeric value (for range type - e.g., RAM, storage)
                textValue:
                    type: string
                    example: "Custom engraving text"
                    maxLength: 2000
                    description: Free text value (for text type)
                booleanValue:
                    type: boolean
                    example: true
                    description: Boolean value (for boolean type)
        CreateProductRequest:
            type: object
            required:
                - name
                - enabled
                - price
                - quantity
            properties:
                id:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                    description: Optional client-generated UUID
                name:
                    type: string
                    example: "iPhone 15 Pro"
                    minLength: 2
                    maxLength: 100
                description:
                    type: string
                    example: "Latest iPhone with A17 Pro chip"
                    maxLength: 2000
                price:
                    type: number
                    example: 999.99
                    minimum: 0
                    maximum: 100000000
                quantity:
                    type: integer
                    example: 100
                    minimum: 0
                    maximum: 100000000
                imageId:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                    description: Reference to image in Image Service
                categoryId:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                    description: Category this product belongs to
                enabled:
                    type: boolean
                    example: true
        UpdateProductRequest:
            type: object
            required:
                - id
                - name
                - enabled
                - price
                - quantity
                - version
            properties:
                id:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                name:
                    type: string
                    example: "iPhone 15 Pro"
                    minLength: 2
                    maxLength: 100
                description:
                    type: string
                    example: "Latest iPhone with A17 Pro chip"
                    maxLength: 2000
                price:
                    type: number
                    example: 999.99
                    minimum: 0
                    maximum: 100000000
                quantity:
                    type: integer
                    example: 100
                    minimum: 0
                    maximum: 100000000
                imageId:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                categoryId:
                    type: string
                    format: uuid
                    pattern: "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"
                    example: "123e4567-e89b-12d3-a456-426614174000"
                enabled:
                    type: boolean
                    example: true
                version:
                    type: integer
                    example: 1
                    minimum: 1
                    description: Optimistic locking version
