openapi: 3.0.3
info:
  title: Catalog API
  version: 1.0.1
  description: |
    API for managing product catalog.
    
    This service combines:
    - **Attributes** - Product attribute definitions (color, size, RAM, etc.)
    - **Categories** - Product categories with attribute assignments
    - **Products** - Products with attribute values

tags:
  - name: Attributes
    description: Product attribute definitions and options
  - name: Categories
    description: Product categories with attribute assignments
  - name: Products
    description: Products with attribute values

paths:
  # ==================== ATTRIBUTES ====================
  /v1/attribute/create:
    $ref: "./paths/attributes.yml#/paths/~1v1~1attribute~1create"
  /v1/attribute/update:
    $ref: "./paths/attributes.yml#/paths/~1v1~1attribute~1update"
  /v1/attribute/get/{id}:
    $ref: "./paths/attributes.yml#/paths/~1v1~1attribute~1get~1{id}"
  /v1/attribute/list:
    $ref: "./paths/attributes.yml#/paths/~1v1~1attribute~1list"
  /v1/attribute/delete/{id}:
    $ref: "./paths/attributes.yml#/paths/~1v1~1attribute~1delete~1{id}"

  # ==================== CATEGORIES ====================
  /v1/category/create:
    $ref: "./paths/categories.yml#/paths/~1v1~1category~1create"
  /v1/category/update:
    $ref: "./paths/categories.yml#/paths/~1v1~1category~1update"
  /v1/category/get/{id}:
    $ref: "./paths/categories.yml#/paths/~1v1~1category~1get~1{id}"
  /v1/category/list:
    $ref: "./paths/categories.yml#/paths/~1v1~1category~1list"

  # ==================== PRODUCTS ====================
  /v1/product/create:
    $ref: "./paths/products.yml#/paths/~1v1~1product~1create"
  /v1/product/update:
    $ref: "./paths/products.yml#/paths/~1v1~1product~1update"
  /v1/product/get/{id}:
    $ref: "./paths/products.yml#/paths/~1v1~1product~1get~1{id}"
  /v1/product/list:
    $ref: "./paths/products.yml#/paths/~1v1~1product~1list"

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      description: PASETO token in Authorization header

  schemas:
    # ==================== COMMON ====================
    Problem:
      $ref: "./schemas/common.yml#/components/schemas/Problem"

    # ==================== ATTRIBUTES ====================
    AttributeResponse:
      $ref: "./schemas/attribute.yml#/components/schemas/AttributeResponse"
    AttributeListResponse:
      $ref: "./schemas/attribute.yml#/components/schemas/AttributeListResponse"
    AttributeOption:
      $ref: "./schemas/attribute.yml#/components/schemas/AttributeOption"
    AttributeOptionInput:
      $ref: "./schemas/attribute.yml#/components/schemas/AttributeOptionInput"
    CreateAttributeRequest:
      $ref: "./schemas/attribute.yml#/components/schemas/CreateAttributeRequest"
    UpdateAttributeRequest:
      $ref: "./schemas/attribute.yml#/components/schemas/UpdateAttributeRequest"

    # ==================== CATEGORIES ====================
    CategoryResponse:
      $ref: "./schemas/category.yml#/components/schemas/CategoryResponse"
    CategoryListResponse:
      $ref: "./schemas/category.yml#/components/schemas/CategoryListResponse"
    CategoryAttribute:
      $ref: "./schemas/category.yml#/components/schemas/CategoryAttribute"
    CategoryAttributeInput:
      $ref: "./schemas/category.yml#/components/schemas/CategoryAttributeInput"
    CreateCategoryRequest:
      $ref: "./schemas/category.yml#/components/schemas/CreateCategoryRequest"
    UpdateCategoryRequest:
      $ref: "./schemas/category.yml#/components/schemas/UpdateCategoryRequest"

    # ==================== PRODUCTS ====================
    ProductResponse:
      $ref: "./schemas/product.yml#/components/schemas/ProductResponse"
    ProductListResponse:
      $ref: "./schemas/product.yml#/components/schemas/ProductListResponse"
    ProductAttribute:
      $ref: "./schemas/product.yml#/components/schemas/ProductAttribute"
    ProductAttributeInput:
      $ref: "./schemas/product.yml#/components/schemas/ProductAttributeInput"
    CreateProductRequest:
      $ref: "./schemas/product.yml#/components/schemas/CreateProductRequest"
    UpdateProductRequest:
      $ref: "./schemas/product.yml#/components/schemas/UpdateProductRequest"
